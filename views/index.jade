script(src='/javascripts/tabula.js')

script#post-template(type='text/x-jquery-tmpl')
	.post(class='${type}')
		.meta
			.character 
				a(href='/characters/${characterId}') ${characterName}
			.type ${type}
			.when ${when}
		.body ${body}

script#pagination-template(type='text/x-jquery-tmpl')
	.current page ${page} of ${total}
	a.prev(href='#') prev
	a.next(href='#') next
	.count ${count} post(s)
				
header	
	h1 tabula

	#account
		- if (!user)
			a(href='/auth/facebook') Sign in with Facebook
		- else
			.username= user.name
				a(href='/logout') Sign Out
			ul.create
				li
					a(href='/campaigns/add') Create Campaign
				li
					a(href='/characters/add') Create Character
			- if (user.characters)
				ul.characters
					- each character in user.characters
						li
							a(href='/characters/' + character.id)= character.name
			- if (user.campaigns)
				ul.campaigns
					- each campaign in user.campaigns
						li
							a(href='/campaigns/' + campaign.id)= campaign.name
section(role='game')
	#context
		-if(currentCharacter)
			.character
				a(href='/characters/' + currentCharacter.id)=currentCharacter.name
		-if(currentCampaign)
			.campaign
				a(href='/campaigns/' + currentCampaign.id)= currentCampaign.name		
	#board
		-if(currentCampaign)
			#commands
				button(data-action='toggleOoc') toggle ooc
			#chat
				.input
					textarea(id='post')
				.buttons
					button(data-action='post') post
					//button(data-action='clear') clear		
					//button(data-action='roll') roll
			#pagination
			#stream
		-else
			p
				a(href='/campaigns/join/') join a campaign

footer Christopher Bennage